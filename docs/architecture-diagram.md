# SAVD App - Architecture Diagram

## System Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                            Client Browser                               │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                               Nginx                                     │
│                        (Production Environment)                         │
│                                                                         │
│    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    │
│    │ Static Assets   │    │ Reverse Proxy   │    │ SSL Termination │    │
│    └─────────────────┘    └─────────────────┘    └─────────────────┘    │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                            Next.js Server                               │
│                                                                         │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │
│  │                 │  │                 │  │                         │  │
│  │  React UI       │  │  API Routes     │  │  Server Components      │  │
│  │                 │  │                 │  │                         │  │
│  │  - FileUploader │  │  - /api/upload  │  │  - App Router          │  │
│  │  - Components   │  │  - /api/health  │  │  - Layouts             │  │
│  │                 │  │                 │  │                         │  │
│  └─────────────────┘  └────────┬────────┘  └─────────────────────────┘  │
│                                │                                        │
└────────────────────────────────┼────────────────────────────────────────┘
                                 │
                                 │
                                 ▼
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                         AWS SDK v3 Client                              │
│                                                                        │
└────────────────────────────────┬───────────────────────────────────────┘
                                 │
                                 │
                                 │
                                 │
                                 ▼
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                       Wasabi Cloud Storage                             │
│                                                                        │
│  ┌─────────────────────────┐      ┌─────────────────────────────────┐  │
│  │                         │      │                                 │  │
│  │  Pre-signed URLs        │      │  S3 Bucket                      │  │
│  │                         │      │                                 │  │
│  └─────────────────────────┘      └─────────────────────────────────┘  │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

## File Upload Flow

```
┌──────────┐                ┌───────────────┐             ┌──────────────┐
│          │ 1. Request     │               │ 2. Generate │              │
│  Client  │────────────────▶  Next.js API  │────────────▶│  Pre-signed  │
│  Browser │                │               │             │  URL         │
└──────────┘                └───────────────┘             └──────────────┘
     │                                                           │
     │                                                           │
     │ 3. Return pre-signed URL                                  │
     │◀──────────────────────────────────────────────────────────┘
     │
     │
     │ 4. Direct upload to Wasabi
     │
     │
     ▼
┌──────────────┐
│              │
│  Wasabi S3   │
│              │
└──────────────┘
```

## Component Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                              App (page.tsx)                             │
│                                                                         │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                           FileUploader.tsx                              │
│                                                                         │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │
│  │                 │  │                 │  │                         │  │
│  │  React Dropzone │  │  Upload Logic   │  │  Progress Tracking      │  │
│  │                 │  │                 │  │                         │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                            Shadcn UI Components                         │
│                                                                         │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │
│  │                 │  │                 │  │                         │  │
│  │  Card           │  │  Button         │  │  Progress               │  │
│  │                 │  │                 │  │                         │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Docker Production Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                            Docker Host                                  │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                      Docker Network                             │    │
│  │                                                                 │    │
│  │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────┐  │    │
│  │  │                 │    │                 │    │             │  │    │
│  │  │  Nginx          │    │  SAVD App       │    │  Redis      │  │    │
│  │  │  Container      │◀───▶  Container      │◀───▶ Container   │  │    │
│  │  │  (Port 80/443)  │    │  (Port 3000)    │    │ (Internal)  │  │    │
│  │  │                 │    │                 │    │             │  │    │
│  │  └─────────────────┘    └─────────────────┘    └─────────────┘  │    │
│  │         │                       │                     │         │    │
│  │         ▼                       ▼                     ▼         │    │
│  │  ┌─────────────┐        ┌─────────────┐        ┌─────────────┐  │    │
│  │  │ nginx_logs  │        │ next_cache  │        │ redis_data  │  │    │
│  │  │  Volume     │        │  Volume     │        │  Volume     │  │    │
│  │  └─────────────┘        └─────────────┘        └─────────────┘  │    │
│  │                                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Data Flow Diagram

```
┌──────────┐     ┌───────────────┐     ┌───────────────┐
│          │     │               │     │               │
│  Client  │     │  Next.js      │     │  Wasabi SDK   │
│  Browser │     │  API Routes   │     │               │
└──────────┘     └───────────────┘     └───────────────┘
     │                  │                     │
     │  1. Select File  │                     │
     │─────────────────▶│                     │
     │                  │                     │
     │                  │  2. Request         │
     │                  │  Pre-signed URL     │
     │                  │────────────────────▶│
     │                  │                     │
     │                  │  3. Return          │
     │                  │  Pre-signed URL     │
     │                  │◀────────────────────│
     │                  │                     │
     │  4. Return       │                     │
     │  Pre-signed URL  │                     │
     │◀─────────────────│                     │
     │                  │                     │
     │  5. Upload File  │                     │
     │  directly to     │                     │
     │  Wasabi          │                     │
     │─────────────────────────────────────────────────▶
     │                  │                     │        │
     │                  │                     │        │
     │                  │                     │        │
     │  6. Upload       │                     │        │
     │  Confirmation    │                     │        │
     │◀─────────────────────────────────────────────────
     │                  │                     │
```

## Technology Stack Diagram

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                           SAVD App Tech Stack                           │
│                                                                         │
├─────────────────┬─────────────────┬─────────────────┬─────────────────┐ │
│                 │                 │                 │                 │ │
│   Frontend      │   Backend       │   Cloud         │   DevOps        │ │
│                 │                 │                 │                 │ │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤ │
│                 │                 │                 │                 │ │
│   Next.js 15    │   Next.js API   │   Wasabi S3     │   Docker        │ │
│                 │                 │                 │                 │ │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤ │
│                 │                 │                 │                 │ │
│   React 19      │   TypeScript    │   AWS SDK v3    │   Docker        │ │
│                 │                 │                 │   Compose       │ │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤ │
│                 │                 │                 │                 │ │
│   TypeScript    │   Node.js       │   S3 Presigned  │   Nginx         │ │
│                 │                 │   URLs          │                 │ │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤ │
│                 │                 │                 │                 │ │
│   Tailwind CSS  │   API Routes    │                 │   Redis         │ │
│                 │                 │                 │                 │ │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤ │
│                 │                 │                 │                 │ │
│   Shadcn UI     │                 │                 │   Multi-stage   │ │
│                 │                 │                 │   Builds        │ │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤ │
│                 │                 │                 │                 │ │
│   React         │                 │                 │   Shell         │ │
│   Dropzone      │                 │                 │   Scripts       │ │
│                 │                 │                 │                 │ │
└─────────────────┴─────────────────┴─────────────────┴─────────────────┘ │
                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Directory Structure

```
savd-app/
│
├── src/
│   ├── app/                  # Next.js App Router
│   │   ├── api/              # API Routes
│   │   │   ├── health/       # Health check endpoint
│   │   │   │   └── route.ts
│   │   │   └── upload/       # File upload endpoint
│   │   │       └── route.ts
│   │   │
│   │   ├── globals.css       # Global styles
│   │   ├── layout.tsx        # Root layout
│   │   └── page.tsx          # Main page
│   │
│   ├── components/           # React components
│   │   ├── ui/               # Shadcn UI components
│   │   └── FileUploader.tsx  # Main file upload component
│   │
│   └── lib/                  # Utility libraries
│       ├── utils.ts          # General utilities
│       └── wasabi.ts         # Wasabi client configuration
│
├── public/                   # Static assets
│
├── nginx/                    # Nginx configuration
│   ├── conf.d/               # Site-specific configurations
│   └── nginx.conf            # Main Nginx configuration
│
├── scripts/                  # Utility scripts
│   ├── docker-dev.sh         # Development Docker utilities
│   └── docker-prod.sh        # Production Docker utilities
│
├── docs/                     # Project documentation
│
├── docker-compose.yml        # Development Docker Compose
├── docker-compose.prod.yml   # Production Docker Compose
└── Dockerfile                # Multi-stage Docker build
```
